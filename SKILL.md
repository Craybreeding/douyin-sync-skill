---
name: douyin-sync
description: |
  åŒæ­¥æŠ–éŸ³è§†é¢‘æ•°æ®åˆ°é£ä¹¦å¤šç»´è¡¨æ ¼ï¼Œæˆ–æŸ¥è¯¢å•ä¸ªè§†é¢‘ä¿¡æ¯ã€‚æ”¯æŒï¼š
  (1) ä»é£ä¹¦è¡¨æ ¼è¯»å–è§†é¢‘IDåˆ—è¡¨ï¼Œæ‰¹é‡è·å–æŠ–éŸ³æ•°æ®ï¼ˆæ’­æ”¾é‡ã€ç‚¹èµã€è¯„è®ºç­‰ï¼‰ï¼Œå›å†™è¡¨æ ¼
  (2) ç›´æ¥æŸ¥è¯¢å•ä¸ªæŠ–éŸ³è§†é¢‘çš„è¯¦ç»†æ•°æ®
  (3) æå–è§†é¢‘è„šæœ¬/å­—å¹•ï¼ˆæ”¯æŒäº‘å›¾æ•°æ® + Whisperè¯­éŸ³è¯†åˆ«ï¼‰
  (4) å¤šå“ç‰Œäº‘å›¾é…ç½®ç®¡ç†
  è§¦å‘åœºæ™¯ï¼šç”¨æˆ·éœ€è¦åŒæ­¥æŠ–éŸ³è§†é¢‘æ•°æ®ã€æ›´æ–°é£ä¹¦è¡¨æ ¼ã€æŸ¥è¯¢æŠ–éŸ³è§†é¢‘ä¿¡æ¯ã€æå–è§†é¢‘è„šæœ¬
metadata:
  {
    "openclaw": {
      "emoji": "ğŸ“Š",
      "skillKey": "douyin-sync",
      "requires": {
        "bins": ["python3"],
        "env": ["DOUYIN_API_KEY"]
      }
    }
  }
---

# æŠ–éŸ³æ•°æ®åŒæ­¥

åŒæ­¥æŠ–éŸ³è§†é¢‘æ•°æ®åˆ°é£ä¹¦å¤šç»´è¡¨æ ¼ï¼Œæˆ–æŸ¥è¯¢å•ä¸ªè§†é¢‘ä¿¡æ¯ã€‚

## å¿«é€Ÿå¼€å§‹

### æŸ¥è¯¢å•ä¸ªè§†é¢‘

```bash
# é€šè¿‡è§†é¢‘IDæŸ¥è¯¢
python3 {baseDir}/scripts/sync.py query --video-id 7567352731951164082

# é€šè¿‡é“¾æ¥æŸ¥è¯¢
python3 {baseDir}/scripts/sync.py query --url "https://www.douyin.com/video/7567352731951164082"

# JSONè¾“å‡ºï¼ˆæ–¹ä¾¿ç¨‹åºè§£æï¼‰
python3 {baseDir}/scripts/sync.py query --video-id 7567352731951164082 --output json
```

### åŒæ­¥é£ä¹¦è¡¨æ ¼

```bash
# åŒæ­¥æŒ‡å®šè¡¨æ ¼ï¼ˆåªæ›´æ–°ç¼ºå¤±æ•°æ®çš„è®°å½•ï¼‰
python3 {baseDir}/scripts/sync.py sync --app-token <APP_TOKEN> --table-id <TABLE_ID>

# å¼ºåˆ¶åˆ·æ–°æ‰€æœ‰è®°å½•
python3 {baseDir}/scripts/sync.py sync --app-token <APP_TOKEN> --table-id <TABLE_ID> --force

# æŒ‡å®šè§†å›¾åŒæ­¥
python3 {baseDir}/scripts/sync.py sync --app-token <APP_TOKEN> --table-id <TABLE_ID> --view-id <VIEW_ID>
```

### ç¿»è¯‘å†…å®¹

```bash
# ç¿»è¯‘å†…å®¹åˆ°ç®€ä½“ä¸­æ–‡ï¼ˆé»˜è®¤ï¼‰
python3 {baseDir}/scripts/sync.py translate --content "Hello, welcome to TikHub!"

# ç¿»è¯‘åˆ°è‹±æ–‡
python3 {baseDir}/scripts/sync.py translate --content "è¿™æ˜¯ä¸€æ®µä¸­æ–‡å†…å®¹" --lang en

# ç¿»è¯‘åˆ°æ—¥è¯­ï¼ŒJSONè¾“å‡º
python3 {baseDir}/scripts/sync.py translate --content "è¿™æ˜¯å†…å®¹" --lang ja --output json
```

**æ”¯æŒçš„è¯­è¨€ä»£ç ï¼š**
- `zh-Hans`: ç®€ä½“ä¸­æ–‡
- `zh-Hant`: ç¹ä½“ä¸­æ–‡
- `en`: è‹±è¯­
- `ja`: æ—¥è¯­
- `ko`: éŸ©è¯­
- `fr`: æ³•è¯­
- `de`: å¾·è¯­
- `es`: è¥¿ç­ç‰™è¯­
- `pt`: è‘¡è„ç‰™è¯­
- `vi`: è¶Šå—è¯­
- `th`: æ³°è¯­
- `id`: å°å°¼è¯­
- `ru`: ä¿„è¯­

## ç¯å¢ƒå˜é‡

| å˜é‡å | å¿…éœ€ | è¯´æ˜ |
|--------|------|------|
| `DOUYIN_API_KEY` | æ˜¯ | TikHub API å¯†é’¥ |
| `FEISHU_APP_ID` | syncå‘½ä»¤ | é£ä¹¦åº”ç”¨ App ID |
| `FEISHU_APP_SECRET` | syncå‘½ä»¤ | é£ä¹¦åº”ç”¨ App Secret |

## è¾“å‡ºç¤ºä¾‹

### å•è§†é¢‘æŸ¥è¯¢ (text)

```
============================================================
è§†é¢‘ID: 7567352731951164082
é“¾æ¥: https://www.douyin.com/video/7567352731951164082
------------------------------------------------------------
æ ‡é¢˜: è¿™æ˜¯è§†é¢‘æ ‡é¢˜...
ä½œè€…: æŸæŸè´¦å· (@douyin_id)
æ—¶é•¿: 15.5 ç§’
------------------------------------------------------------
æ’­æ”¾é‡: 1,234,567
ç‚¹èµæ•°: 12,345
è¯„è®ºæ•°: 678
åˆ†äº«æ•°: 234
æ”¶è—æ•°: 567
------------------------------------------------------------
è¯é¢˜æ ‡ç­¾: #è¯é¢˜1 #è¯é¢˜2
æ•°æ®æ¥æº: App API
============================================================
```

### å•è§†é¢‘æŸ¥è¯¢ (json)

```json
{
  "aweme_id": "7567352731951164082",
  "url": "https://www.douyin.com/video/7567352731951164082",
  "title": "è¿™æ˜¯è§†é¢‘æ ‡é¢˜...",
  "author": {
    "nickname": "æŸæŸè´¦å·",
    "unique_id": "douyin_id"
  },
  "statistics": {
    "play_count": 1234567,
    "digg_count": 12345,
    "comment_count": 678,
    "share_count": 234,
    "collect_count": 567
  },
  "hashtags": "#è¯é¢˜1 #è¯é¢˜2",
  "is_deleted": false,
  "data_source": "App API"
}
```

## å­—æ®µæ˜ å°„

è„šæœ¬ä¼šå°†æŠ–éŸ³æ•°æ®æ˜ å°„åˆ°é£ä¹¦è¡¨æ ¼çš„ä»¥ä¸‹å­—æ®µï¼š

| æŠ–éŸ³æ•°æ® | é£ä¹¦å­—æ®µå | ç±»å‹ |
|---------|-----------|------|
| aweme_id | è§†é¢‘ID | æ–‡æœ¬ |
| share_url | è§†é¢‘é“¾æ¥ | é“¾æ¥ |
| desc | æ ‡é¢˜æè¿° | æ–‡æœ¬ |
| author.nickname | ä½œè€…æ˜µç§° | æ–‡æœ¬ |
| author.unique_id | ä½œè€…ID | æ–‡æœ¬ |
| create_time | å‘å¸ƒæ—¶é—´ | æ—¥æœŸ |
| duration | è§†é¢‘æ—¶é•¿(ç§’) | æ•°å­— |
| play_count | æ’­æ”¾é‡ | æ•°å­— |
| digg_count | ç‚¹èµæ•° | æ•°å­— |
| comment_count | è¯„è®ºæ•° | æ•°å­— |
| share_count | åˆ†äº«æ•° | æ•°å­— |
| collect_count | æ”¶è—æ•° | æ•°å­— |
| text_extra | è¯é¢˜æ ‡ç­¾ | æ–‡æœ¬ |

è¯¦ç»†æ˜ å°„è§ `references/field-mapping.md`

## ä¾èµ–å®‰è£…

```bash
pip3 install requests
```

### æå–è§†é¢‘è„šæœ¬

```bash
# æå–è§†é¢‘å­—å¹• (ä½¿ç”¨ Groq Whisper å…è´¹è¯­éŸ³è¯†åˆ«)
python3 {baseDir}/scripts/sync.py script --video-id 7567352731951164082

# SRT å­—å¹•æ ¼å¼è¾“å‡º
python3 {baseDir}/scripts/sync.py script --video-id 7567352731951164082 --output srt

# ä¿å­˜ç»“æœåˆ°æ–‡ä»¶
python3 {baseDir}/scripts/sync.py script --video-id 7567352731951164082 --save output.json
```

**è„šæœ¬æå–ç­–ç•¥ï¼š**
1. é¦–å…ˆæ£€æŸ¥æœ¬åœ°äº‘å›¾ç¼“å­˜ï¼ˆä»å·¨é‡äº‘å›¾æŠ“å–çš„æ•°æ®ï¼ŒåŒ…å«å†…å®¹å…¬å¼æ ‡ç­¾ï¼‰
2. å¦‚æœç¼“å­˜ä¸­æ²¡æœ‰ï¼Œä½¿ç”¨ **Groq Whisper** å…è´¹è¯­éŸ³è¯†åˆ«
3. æ”¯æŒ text/json è¾“å‡ºæ ¼å¼

### å“ç‰Œç®¡ç†

```bash
# åˆ—å‡ºæ‰€æœ‰å·²é…ç½®å“ç‰Œ
python3 {baseDir}/scripts/sync.py brands --list

# æ·»åŠ æ–°å“ç‰Œ
python3 {baseDir}/scripts/sync.py brands --add lego "ä¹é«˜/LEGO" 1731407744628743 "æ¯å©´/æ¯å©´"

# è·å–å“ç‰Œäº‘å›¾URL
python3 {baseDir}/scripts/sync.py brands --url lego
```

## ç¯å¢ƒå˜é‡

| å˜é‡å | å¿…éœ€ | è¯´æ˜ |
|--------|------|------|
| `DOUYIN_API_KEY` | æ˜¯ | TikHub API å¯†é’¥ |
| `FEISHU_APP_ID` | syncå‘½ä»¤ | é£ä¹¦åº”ç”¨ App ID |
| `FEISHU_APP_SECRET` | syncå‘½ä»¤ | é£ä¹¦åº”ç”¨ App Secret |
| `GROQ_API_KEY` | scriptå‘½ä»¤ | Groq Whisper è¯­éŸ³è¯†åˆ« (å…è´¹) |

## ä½¿ç”¨åœºæ™¯

1. **æ‰¹é‡åŒæ­¥æ–°è§†é¢‘**: å°†è§†é¢‘IDç²˜è´´åˆ°é£ä¹¦è¡¨æ ¼ï¼Œè¿è¡ŒåŒæ­¥è·å–å®Œæ•´æ•°æ®
2. **å®šæœŸåˆ·æ–°ç»Ÿè®¡**: ä½¿ç”¨ `--force` å‚æ•°å¼ºåˆ¶æ›´æ–°æ‰€æœ‰è§†é¢‘çš„æœ€æ–°æ’­æ”¾é‡
3. **å•è§†é¢‘å¿«é€ŸæŸ¥è¯¢**: ç›´æ¥æŸ¥è¯¢æŸä¸ªè§†é¢‘çš„æ•°æ®ï¼Œæ— éœ€é£ä¹¦è¡¨æ ¼
4. **æ•°æ®å¯¼å‡º**: ä½¿ç”¨ `--output json` è·å–ç»“æ„åŒ–æ•°æ®ä¾›å…¶ä»–ç¨‹åºå¤„ç†
5. **è§†é¢‘è„šæœ¬åˆ†æ**: æå–è§†é¢‘å£æ’­å†…å®¹ï¼Œåˆ†æå†…å®¹å…¬å¼å’Œåˆ›ä½œæ¨¡å¼
6. **å¤šå“ç‰Œç®¡ç†**: é…ç½®å¤šä¸ªå“ç‰Œçš„äº‘å›¾è´¦å·ï¼Œå¿«é€Ÿåˆ‡æ¢æŸ¥è¯¢
